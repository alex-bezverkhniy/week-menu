<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Classless example â€¢ Pico.css</title>
    <meta
      name="description"
      content="Just a pure semantic HTML markup, without .classes.  Built with Pico CSS."
    />

    <!-- Pico.css (Classless version) -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.classless.min.css"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <style>
      @media (min-width:320px)  { /* smartphones, iPhone, portrait 480x320 phones */ 
        body>main {
          max-width: 95%;          
        }
        .grid>article {
          padding-bottom: 0;
          margin-bottom: 0;
          margin-top: 1em;
        }
        body>header {
          padding-left: 1em;
          padding-right: 1em;
        }

      }
      @media (min-width:481px)  { /* portrait e-readers (Nook/Kindle), smaller tablets @ 600 or @ 640 wide. */ 
        body>main {
          max-width: 95%;
        }
      }
      body>header {
        padding-top: 1em;
        padding-bottom: 1em;
      }
      article>header {
        padding: 1em;
      }
      .icon svg{
        width: 16px;
      }
    </style>
  </head>

  <body>
    <!-- Header -->
    <header>
      <hgroup>
        <h1>Menu</h1>
        <h2>Menu for a week
          <a href="#" class="icon" id="refreshBtn" data-tooltip="Re-generate menu for a week"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z"/></svg></a>
        </h2>
        
      </hgroup>
    </header>
    <main>
      {% if debug %}
        <article>
            <code>
                {{menu}}
            </code>    
        </article>
        {% endif %}
        {% for weekday in  week_days %}          
          <details>
            <summary>{{ weekday }}</summary>
            <div class="grid">
              <article>
                <header>Breakfast</header>
                <p>
                  {{menu['breakfast'][loop.index0]}}
                </p>
              </article>              
              <article>
                <header>Lunch</header>
                <p>
                  {{menu['lunch'][loop.index0]}}
                </p>
              </article>
              <article>
                <header>Dinner</header>
                <p>
                  {{menu['dinner'][loop.index0]}}
                </p>
              </article>
              <article>
                <header>Snacks</header>
                <p>
                  {{menu['snacks'][loop.index0]}}
                </p>
              </article>
            </div>
          </details>  
        {% endfor%}      
    </main>
    <script>
      let refreshBtn = document.getElementById('refreshBtn');
      refreshBtn.onclick = () => {
        const xhr = new XMLHttpRequest();
        xhr.open("PATCH", "/menu", true);
        xhr.onreadystatechange = () => {
          if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 204) {
            window.location.reload();
          }
        };
        xhr.send(null);
      };
    </script>
 </body>